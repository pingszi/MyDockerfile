{"version":3,"sources":["webpack:///./src/store/mutations.js","webpack:///./src/store/mutation-types.js","webpack:///./src/store/actions.js","webpack:///./src/store/index.js","webpack:///./src/store/getters.js","webpack:///./src/router/index.js","webpack:///./src/router/handleRoute.js","webpack:///./src/directives/index.js","webpack:///./src/filters/index.js","webpack:///src/App.vue","webpack:///./src/App.vue?3dd3","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/api/index.js","webpack:///./src/utils/utils.js"],"names":["mutations","_GETDATAFROMLOCALSTOR","defineProperty_default","state","json","allMsg","JSON","parse","question","length","msg","push","isSetSessionStorage","window","sessionStorage","setItem","stringify_default","data","topTenQuestion","outputScrollPosition","newDaySession","date","Object","utils","fontSize","theme","role","uuid","isQuestionAsked","isMobile","unResolveTipsContent","actions_getQuestionItem","qItem","getters","q","qid","typeof_default","trim","id","test","qItemFromNumber","getLatestRelativeQuestion","actions_OutputMsg","OutputMsg","commit","classCallCheck_default","this","host","content","text","relativeFileList","relativeQuestionList","isSetResolve","isLaoshi","time","actions_UserOutputMsg","UserOutputMsg","_this","possibleConstructorReturn_default","__proto__","get_prototype_of_default","call","renderMsg","actions_AIOutputMsg","AIOutputMsg","_this2","actions_AIOutputNoneMsg","AIOutputNoneMsg","_this3","isShowSendEmail","actions_LaoshiOutPut","LaoshiOutPut","_this4","actions_AIResponceJsonOutputMsg","AIResponceJsonOutputMsg","_this5","ai_answer","ai_policy_answer","ai_relative_answer","actions_TipsMsg","TipsMsg","_this6","isTips","actions","addTopTenQuestion","_ref","_this7","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","api","sent","stop","askQuestion","_ref2","_this8","dispatch","_callee2","_getQuestionItem","_context2","abrupt","uuid_key","knowledge_id","catch","err","response","status","no_result","no_policy_result","no_relative_result","questionResolve","_ref3","_this9","_callee3","_context3","questionNotResolve","_ref4","_this10","_callee4","_context4","renderQuestionNotResolveTips","_ref5","clearMsg","_ref6","removeItem","sendEmoji","_ref7","emoji","_this11","_callee5","_context5","src","meanning","code","polling","_ref8","_this12","_callee6","_context6","answers","forEach","beginPolling","_ref9","_this13","_callee7","_context7","setInterval","switchRole","_ref10","promise_default","resolve","refreshPolling","_ref11","_this14","_callee8","_context8","sendEmail","_ref12","info","email","then","vue_esm","use","vuex_esm","__webpack_exports__","Store","number","slice","error","getFilefromId","fileObj","item","m","file","getTheme","vue_router_esm","router","routes","path","name","component","Promise","all","__webpack_require__","e","bind","meta","keepAlive","beforeEach","to","from","versions","mobile","store","toUpperCase","toLowerCase","directive","inserted","el","focus","filter","value","toString","replace","App","computed","extends_default","methods","scrollResize","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","include","staticRenderFns","src_App","normalizeComponent","dist_default","dialog","config","productionTip","$store","components","template","__WEBPACK_IMPORTED_MODULE_0_axios___default","get","method","url","params","key","userid","__WEBPACK_IMPORTED_MODULE_1__store_index__","post","client_type","polyfill","__WEBPACK_IMPORTED_MODULE_0_vue__","nextTick","$","getNiceScroll","resize","doScrollTop","scrollHeight","height","isAnimate","scrollTop","now","Date","hour","getHours","minute","getMinutes","second","getSeconds","year","getFullYear","month","getMonth","day","getDate","selector","niceScroll","cursorcolor","cursorwidth","cursorborder","u","mobile_bs","navigator","userAgent","trident","indexOf","presto","webKit","gecko","match","ios","android","iPhone","iPad","webApp"],"mappings":"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","file":"static/js/app.9f2b92ffe2d6aeee9d1a.js","sourcesContent":["import { getNowDate} from '../utils/utils'\r\n\r\nimport {\r\n    GETDATAFROMLOCALSTORAGE,\r\n    ADDQUESTION,\r\n    ADDTOPTENQUESTION,\r\n    ADDSESSIONITEM,\r\n    CHANGEOUTPUTSCROLLPOSITON,\r\n    CLEARALLMSG,\r\n    CHANGEFONTSIZE,\r\n    CHANGETHEME,\r\n    SETROLE,\r\n    SETUUID,\r\n    SETISASKED ,\r\n    SETISMOBILE,\r\n    UNRESOLVETIPSCONTENT,\r\n} from './mutation-types'\r\n\r\nexport default {\r\n\r\n    [GETDATAFROMLOCALSTORAGE](state,json){\r\n        state.allMsg = JSON.parse(json);\r\n    },\r\n\r\n    [ADDQUESTION](state,question){\r\n        state.allMsg[state.allMsg.length-1].msg.push(question);\r\n        if(state.isSetSessionStorage){\r\n            window.sessionStorage.setItem('allMsg',JSON.stringify(state.allMsg));\r\n        }\r\n    },\r\n\r\n    [ADDTOPTENQUESTION](state,data){\r\n        state.topTenQuestion = data;\r\n    },\r\n\r\n    [ADDSESSIONITEM](state,data){\r\n        state.allMsg.push(data);\r\n    },\r\n\r\n    [CHANGEOUTPUTSCROLLPOSITON](state,data){\r\n        state.outputScrollPosition = data;\r\n    },\r\n\r\n    [CLEARALLMSG](state){\r\n        let newDaySession = {\r\n            date: getNowDate(),\r\n            msg: []\r\n        }\r\n        state.allMsg = [newDaySession]\r\n    },\r\n\r\n    [CHANGEFONTSIZE](state,data){\r\n        state.fontSize = data;\r\n    },\r\n\r\n    [CHANGETHEME](state,data){\r\n        state.theme = data;\r\n    },\r\n\r\n    [SETROLE](state,data){\r\n        state.role = data;\r\n        if(state.isSetSessionStorage){\r\n            window.sessionStorage.setItem('role',data);\r\n        }\r\n    },\r\n\r\n    [SETUUID](state,data){\r\n        state.uuid = data;\r\n        if(state.isSetSessionStorage){\r\n            window.sessionStorage.setItem('uuid',data);\r\n        }\r\n    },\r\n\r\n    [SETISASKED](state,data){\r\n        state.isQuestionAsked = data;\r\n    },\r\n\r\n    [SETISMOBILE](state,data){\r\n        state.isMobile = data;\r\n    },\r\n\r\n    [UNRESOLVETIPSCONTENT](state,data){\r\n        state.unResolveTipsContent = data;\r\n    },\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","export const GETDATAFROMLOCALSTORAGE = 'GETDATAFROMLOCALSTORAGE';\r\nexport const ADDQUESTION = 'ADDQUESTION';\r\nexport const ADDTOPTENQUESTION = 'ADDTOPTENQUESTION';\r\nexport const ADDSESSIONITEM = 'ADDSESSIONITEM';\r\nexport const CHANGEOUTPUTSCROLLPOSITON = 'CHANGEOUTPUTSCROLLPOSITON';\r\nexport const CLEARALLMSG = 'CLEARALLMSG';\r\nexport const CHANGEFONTSIZE = 'CHANGEFONTSIZE';\r\nexport const CHANGETHEME = 'CHANGETHEME';\r\nexport const SETROLE = 'SETROLE';\r\nexport const SETUUID = 'SETUUID';\r\nexport const SETISASKED = 'SETISASKED';\r\nexport const SETISMOBILE = 'SETISMOBILE';\r\nexport const UNRESOLVETIPSCONTENT = 'UNRESOLVETIPSCONTENT';\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-types.js","import {\r\n    getTopTenQuestion,\r\n    getAnswer,\r\n    isUnresolve,\r\n    isResolve,\r\n    getResultFromTuring,\r\n    getPollingInfo,\r\n    askQuestions,\r\n    sendEmail\r\n    \r\n} from '../api'\r\n\r\nimport {\r\n    scrollToBottom,\r\n    getNowDate,\r\n    getNowTime\r\n} from '../utils/utils'\r\n\r\n/**\r\n * @description 找出问题及问题id\r\n * @param {*} qItem:String|Object 传入第一个参数 \r\n * @param {*} getters vuex实例的 getters属性\r\n * @returns {q,qid}\r\n */\r\nlet getQuestionItem = (qItem,getters) => {\r\n    let q,qid;\r\n\r\n    if(typeof qItem == 'object'){\r\n        q = qItem.question.trim();\r\n        qid = qItem.id\r\n    }\r\n    \r\n    if(typeof qItem == 'string'){\r\n        q = qItem.trim();\r\n        qid = ''\r\n    }\r\n\r\n    //数字\r\n    if(/^\\d+$/.test(q)){\r\n        let qItemFromNumber = getters.getLatestRelativeQuestion(q);\r\n        if(qItemFromNumber){\r\n            q = qItemFromNumber[0]\r\n            qid = qItemFromNumber[1]\r\n        }\r\n    }\r\n\r\n    return {q,qid}\r\n}\r\n\r\n/**\r\n * @description 输出消息父类\r\n * @author fangyang\r\n * @class OutputMsg\r\n */\r\nclass OutputMsg {\r\n    /**\r\n     *Creates an instance of OutputMsg.\r\n     * @author fangyang\r\n     * @param {*} commit vuex实例的commit方法\r\n     * @memberof OutputMsg\r\n     */\r\n    constructor(commit){\r\n        this.commit = commit;\r\n        this.msg = {\r\n            host:'',\r\n            content:{\r\n                text:'',\r\n                relativeFileList:null,\r\n                relativeQuestionList:null,\r\n                isSetResolve:false,\r\n                isLaoshi:false,\r\n                time:getNowTime(),\r\n                question:''\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description 提交消息到vuex实例上\r\n     * @author fangyang\r\n     * @memberof OutputMsg\r\n     */\r\n    renderMsg(){\r\n        this.commit('ADDQUESTION',this.msg);\r\n        scrollToBottom();\r\n    }\r\n}\r\n\r\n/**\r\n * @description 用户输出文本消息类\r\n * @author fangyang\r\n * @class UserOutputMsg\r\n * @extends {OutputMsg}\r\n */\r\nclass UserOutputMsg extends OutputMsg {\r\n    /**\r\n     *Creates an instance of UserOutputMsg.\r\n     * @author fangyang\r\n     * @param {*} commit vuex实例的commit方法\r\n     * @param {*} q 消息内容\r\n     * @memberof UserOutputMsg\r\n     */\r\n    constructor(commit,q){\r\n        super(commit);\r\n        this.msg.host = 'user';\r\n        this.msg.content.text = q;\r\n        this.renderMsg();\r\n    }\r\n}\r\n\r\n/**\r\n * @description 机器人输出消息类\r\n * @author fangyang\r\n * @class AIOutputMsg\r\n * @extends {OutputMsg}\r\n */\r\nclass AIOutputMsg extends OutputMsg {\r\n    /**\r\n     *Creates an instance of AIOutputMsg.\r\n     * @author fangyang\r\n     * @param {*} commit  vuex实例的commit方法\r\n     * @param {*} q 消息内容\r\n     * @memberof AIOutputMsg\r\n     */\r\n    constructor(commit,q){\r\n        super(commit);\r\n        this.msg.host = 'ai';\r\n        this.msg.content.text = q;\r\n        this.renderMsg();\r\n    }\r\n}\r\n\r\n/**\r\n * @description 机器人输出消息类\r\n * @author fangyang\r\n * @class AIOutputMsg\r\n * @extends {OutputMsg}\r\n */\r\nclass AIOutputNoneMsg extends OutputMsg {\r\n    /**\r\n     *Creates an instance of AIOutputMsg.\r\n     * @author fangyang\r\n     * @param {*} commit  vuex实例的commit方法\r\n     * @param {*} q 消息内容\r\n     * @memberof AIOutputMsg\r\n     */\r\n    constructor(commit,q){\r\n        super(commit);\r\n        this.msg.host = 'ai';\r\n        this.msg.content.text = '抱歉，您的提问对小穗来说，超纲啦！请在工作时间咨询老师。<br/>如有需要，请联系 QQ：4008861778，或致电源恒热线：400-8861-778。';\r\n        this.msg.content.isShowSendEmail = true;\r\n        this.msg.content.question = q;\r\n        this.renderMsg();\r\n    }\r\n}\r\n\r\n/**\r\n * @description 老师响应的答案类，给出老师标识\r\n * @author fangyang\r\n * @class LaoshiOutPut\r\n * @extends {AIOutputMsg}\r\n */\r\nclass LaoshiOutPut extends OutputMsg {\r\n    /**\r\n     *Creates an instance of LaoshiOutPut.\r\n     * @author fangyang\r\n     * @param {*} commit  vuex实例的commit方法\r\n     * @param {*} q 消息内容\r\n     * @memberof LaoshiOutPut\r\n     */\r\n    constructor(commit,q){\r\n        super(commit,q);\r\n        this.msg.content.isLaoshi = true;\r\n        this.msg.host = 'ai';\r\n        this.msg.content.text = q;\r\n        this.renderMsg();\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * @description 渲染响应的内容，可能包括，相关政策，相关问题，问题的答案等内容\r\n * @author fangyang\r\n * @class AIResponceJsonOutputMsg\r\n * @extends {AIOutputMsg}\r\n */\r\nclass AIResponceJsonOutputMsg extends OutputMsg {\r\n    constructor(commit,data){\r\n        super(commit);\r\n        this.msg.host = 'ai';\r\n        data.ai_answer.length && (this.msg.content.text = data.ai_answer[0]);\r\n        data.ai_policy_answer.length !== 0 && (this.msg.content.relativeFileList = data.ai_policy_answer);\r\n        data.ai_relative_answer.length !== 0 && (this.msg.content.relativeQuestionList = data.ai_relative_answer);\r\n        data.question && (this.msg.content.question = data.question)\r\n        this.msg.content.isSetResolve = true;\r\n        this.renderMsg();\r\n    }\r\n}\r\n\r\nclass TipsMsg extends OutputMsg{\r\n    constructor(commit,role){\r\n        super(commit)\r\n        this.msg = {\r\n            isTips:true,\r\n            msg:role ? \"您好，<b>源恒咨询老师</b>很高兴为您解答！\":\"您好，<b>源恒智能客服小穗</b>很高兴为您服务！\"\r\n        };\r\n        this.renderMsg();\r\n    }\r\n}\r\n\r\nexport default {\r\n    /**\r\n     * @description 热点问题前十\r\n     * @author fangyang\r\n     * @param {*} {commit}\r\n     */\r\n    async addTopTenQuestion({commit}){\r\n        let data = await getTopTenQuestion();\r\n        commit('ADDTOPTENQUESTION',data.data);\r\n    },\r\n\r\n    /**\r\n     * @description 问问题\r\n     * @author fangyang\r\n     * @param {*} {state,commit,getters,dispatch}\r\n     * @param {*} qItem\r\n     */\r\n    async askQuestion({state,commit,getters,dispatch},qItem){\r\n        //获取问题内容和问题id\r\n        let {q,qid} = getQuestionItem(qItem,getters);\r\n        //是否为空\r\n        if(q===\"\"){\r\n            return new AIOutputMsg(commit,\"不允许发送空消息。\");\r\n        }\r\n        //**客服系统逻辑===========================================================/\r\n        if(!state.uuid && state.isQuestionAsked){\r\n            return new AIOutputMsg(commit,'输入问题过于频繁,请您休息一会重新输入！')\r\n        }\r\n        //**======================================================================/\r\n\r\n        //显示用户的输入\r\n        new UserOutputMsg(commit,q);\r\n\r\n        \r\n        //**之前的逻辑==============================================================/\r\n        // let data = await getAnswer(q,qid).catch(err => {\r\n        //     new AIOutputMsg(commit,\"服务器出错了!\")\r\n        // });\r\n\r\n        // if(data.data.token === 0){\r\n        //     //请求图灵机器人\r\n        //     let json = await getResultFromTuring(q)\r\n        //     let msg = json.data.code === 100000 ? json.data.text : '看来我还需要学习来了解更多';\r\n        //     new AIOutputMsg(commit,msg)\r\n        // }else{\r\n        //     new AIResponceJsonOutputMsg(commit,data.data)\r\n        // }\r\n        //**======================================================================/\r\n\r\n\r\n\r\n        //**客服系统逻辑===========================================================/\r\n        let data = await askQuestions({\r\n            \"uuid_key\":state.uuid,\r\n            \"question\":q,\r\n            \"knowledge_id\":qid, \r\n        }).catch(err => {\r\n            if (err.response) {\r\n                err.response.status === 503 && new AIOutputMsg(commit,\"输入问题过于频繁,请您休息一会重新输入！\")\r\n            }else{\r\n                new AIOutputMsg(commit,\"服务器出错了!\")\r\n            }\r\n        });\r\n\r\n        //第一次问问题\r\n        if(!state.uuid){\r\n            commit('SETUUID',data.data.uuid_key);\r\n            // dispatch('beginPolling');\r\n        }\r\n        // else{\r\n        //     await dispatch('switchRole',data.data.role);\r\n        //     //是老师且不是第一次问问题就显示正在输入中\r\n        //     if(data.data.role){\r\n        //         // new LaoshiOutPut(commit,'正在输入中。。。')\r\n        //     }\r\n        // }\r\n        \r\n        //机器人回答\r\n        if(!data.data.no_result || !data.data.no_policy_result || !data.data.no_relative_result){\r\n            new AIResponceJsonOutputMsg(commit,data.data)\r\n        }else{\r\n            new AIOutputNoneMsg(commit,data.data.question)\r\n        }\r\n\r\n        //**======================================================================/\r\n\r\n    },\r\n\r\n    /**\r\n     * @description 点击解决\r\n     * @author fangyang\r\n     * @param {*} {commit}\r\n     * @param {*} qid\r\n     */\r\n    async questionResolve({commit},qid){\r\n        let data = await isResolve(qid).catch(err => {\r\n            new AIOutputMsg(commit,\"服务器出错了!\")\r\n        }) \r\n        new AIOutputMsg(commit,data.data)\r\n    },\r\n\r\n    /**\r\n     * @description 点击未解决\r\n     * @author fangyang\r\n     * @param {*} {commit}\r\n     * @param {*} qid\r\n     */\r\n    async questionNotResolve({commit},qid){\r\n        let data = await isUnresolve(qid).catch(err => {\r\n            new AIOutputMsg(commit,\"服务器出错了!\")\r\n        })\r\n        commit('UNRESOLVETIPSCONTENT',data.data)\r\n        // new AIOutputMsg(commit,data.data)\r\n    },\r\n\r\n    renderQuestionNotResolveTips({state, commit}){\r\n        new AIOutputMsg(commit,state.unResolveTipsContent);\r\n    },\r\n\r\n    /**\r\n     * @description 清屏\r\n     * @author fangyang\r\n     * @param {*} {commit}\r\n     */\r\n    clearMsg({commit}){\r\n        commit('CLEARALLMSG');\r\n        sessionStorage.removeItem('allMsg');\r\n        scrollToBottom();\r\n    },\r\n\r\n    /**\r\n     * @description 发送表情，请求tuning机器人，渲染结果到页面上\r\n     * @author fangyang\r\n     * @param {*} {commit,getters}\r\n     * @param {*} emoji\r\n     */\r\n    async sendEmoji({commit,getters},emoji){\r\n        new UserOutputMsg(commit,\"<img src='\"+emoji.src+\"' />\");\r\n        let data = await getResultFromTuring(emoji.meanning);\r\n        let msg = data.data.text;\r\n        if(data.data.code !== 100000){\r\n            msg = '看来我还需要学习来了解更多';\r\n        }\r\n        new AIOutputMsg(commit,msg)\r\n    },\r\n\r\n    /**\r\n     * @description 轮询方法体\r\n     * @author fangyang\r\n     * @param {*} {commit,state}\r\n     */\r\n    async polling({commit,state,dispatch}){\r\n        let data = await getPollingInfo(state.uuid);\r\n        dispatch('switchRole',data.data.role)\r\n        //老师回答\r\n        if(data.data.answers.length && data.data.role){\r\n            data.data.answers.forEach(a => new LaoshiOutPut(commit,a));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @description 开始轮询\r\n     * @author fangyang\r\n     * @param {*} {dispatch,commit,state}\r\n     */\r\n    async beginPolling({dispatch,commit,state}){\r\n        let data = await getPollingInfo(state.uuid);\r\n        commit('SETROLE',data.data.role);\r\n        //进入页面时问问题后的问候语 执行1次\r\n        if(data.data.role === 1){\r\n            new LaoshiOutPut(commit,'源恒咨询老师 为您解答。');\r\n            // new LaoshiOutPut(commit,'正在输入中。。。')\r\n        }\r\n        setInterval(() => dispatch('polling'),30000)\r\n    },\r\n\r\n    /**\r\n     * @description 切换角色提醒\r\n     * @author fangyang\r\n     * @param {*} {state,commit}\r\n     * @param {*} role 最新角色\r\n     * @return \\{{{Promise}}\\} {{description}}{{}}\r\n     */\r\n    switchRole({state,commit},role){\r\n        return new Promise(resolve => {\r\n            if(role !== state.role){\r\n                commit('SETROLE',role);\r\n                if(role === 1){\r\n                    new TipsMsg(commit,1)\r\n                }else{\r\n                    new TipsMsg(commit,0)\r\n                }\r\n            }\r\n            resolve();\r\n        })\r\n    },\r\n\r\n    async refreshPolling({dispatch}){\r\n        setInterval(() => dispatch('polling'),30000)\r\n    },\r\n\r\n    sendEmail({state,commit},info){\r\n        sendEmail({\r\n            \"uuid_key\":state.uuid,\r\n            \"question\":info.question,\r\n            \"email\":info.email\r\n        })\r\n        .then(() => {\r\n            new AIOutputMsg(commit,\"发送成功，请等待老师的回复。\")\r\n        })\r\n        .catch(err => {\r\n            new AIOutputMsg(commit,\"发送失败，请重新发送！\")\r\n        })\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport getters from './getters'\r\nimport mutations from './mutations'\r\nimport actions from './actions'\r\n\r\nVue.use(Vuex);\r\n\r\n\r\nexport default new Vuex.Store({\r\n    state:{\r\n        isMobile:false,\r\n        fontSize:'13',//字体大小\r\n        role:0,//老师不在线\r\n        isSetSessionStorage:true,//是否缓存聊天内容到localstorage\r\n        allMsg:[],\r\n        topTenQuestion:[],//热点问题\r\n        outputScrollPosition:0, //记录离开聊天窗口时滚动条的位置\r\n        theme:'grey',//主题 : 'grey','blue'\r\n        uuid:'', // 当前用户唯一标识 ,需要传给后台\r\n        isQuestionAsked:false,\r\n        unResolveTipsContent:''\r\n    },\r\n    getters,\r\n    mutations,\r\n    actions,\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","export default {\r\n    \r\n    getLatestRelativeQuestion:(state) =>(number) => {\r\n        try {\r\n            let q = state.allMsg.slice(-1)[0].msg.slice(-1)[0].content.relativeQuestionList[number-1].question;\r\n            let qid = state.allMsg.slice(-1)[0].msg.slice(-1)[0].content.relativeQuestionList[number-1].id\r\n            return [q,qid];\r\n        } catch (error) {\r\n            return false;\r\n        }\r\n    },\r\n    \r\n    getFilefromId:(state) => (id) => {\r\n        let fileObj = {};\r\n        state.allMsg.forEach(item => {\r\n            item.msg.forEach(m => {\r\n                if(m.content.relativeFileList){\r\n                    m.content.relativeFileList.forEach(file => {\r\n                        file.id == id && (fileObj = file);\r\n                    })\r\n                } \r\n            })\r\n        })\r\n        return fileObj;\r\n    },\r\n\r\n    getTheme: state => state.theme\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nexport default new Router({\n    routes: [{\n            path: '/index',\n            name: 'AppIndex',\n            component:() => import('@/pages/AppIndex'),\n            meta:{\n                keepAlive: true \n            }\n        },\n        {\n            path: '/file/:id',\n            name: 'AppRelatedPolicies',\n            component: () => import('@/pages/AppRelatedPolicies'),\n            meta:{\n            }\n        },\n        {\n            path: '/mIndex',\n            name: 'MobleIndex',\n            component: () => import('@/pages/MobileIndex'),\n            meta:{\n                keepAlive: true \n            }\n        },\n        {\n            path: '/mFile/:id',\n            name: 'MobileRelatedPolicies',\n            component: () => import('@/pages/MobileRelatedPolicies'),\n            meta:{\n            }\n        },\n    ]\n})\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import router from './index.js';\nimport store from '../store/index.js';\n\nimport { mobile_bs } from '@/utils/utils.js'\n\nrouter.beforeEach((to,from,next) => {\n    if(to.path ===\"/\"){\n        if (mobile_bs.versions.mobile) {\n            store.commit('SETISMOBILE',true);\n            next('/mIndex')\n        }else{\n            next('/index')\n        }\n    }else{\n        if(mobile_bs.versions.mobile){\n            store.commit('SETISMOBILE',true);\n            if(to.path.slice(1,2) !== 'm'){\n                next('/m' + to.path.slice(1,2).toUpperCase() + to.path.slice(2));\n            }else{\n                next();\n            }\n    \n        }else{\n            store.commit('SETISMOBILE',false);\n            if(to.path.slice(1,2) === 'm'){\n                next('/' + to.path.slice(2,3).toLowerCase() + to.path.slice(3));\n            }else{\n                next();\n            }\n        }\n        \n    }\n})\n\n\n// WEBPACK FOOTER //\n// ./src/router/handleRoute.js","import Vue from 'vue'\r\n\r\nVue.directive('focus', {\r\n    // 当被绑定的元素插入到 DOM 中时……\r\n    inserted: function (el) {\r\n      // 聚焦元素\r\n      el.focus()\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/directives/index.js","import Vue from 'vue'\r\n\r\nVue.filter('deleteEmptyLine', function (value) {\r\n    if (!value) return ''\r\n    value = value.toString().replace(/[\\n\\r]+/g,'\\n');\r\n    return value;\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/filters/index.js","<template>\n\t<keep-alive include=\"AppIndex,AppMobleIndex\">\n\t\t<router-view/>\n\t</keep-alive>\n</template>\n<script>\nimport { mapState, mapMutations, mapActions } from 'vuex'\nimport { scrollToBottom,getNowDate,getNowTime,scrollResize } from './utils/utils'\n\nexport default {\n    computed:{\n        ...mapState(['allMsg', 'outputScrollPosition', 'outputScrollPosition','isSetSessionStorage'])        \n    },\n    methods:{\n        ...mapMutations(['GETDATAFROMLOCALSTORAGE','ADDSESSIONITEM','SETUUID','SETROLE','SETISMOBILE']),\n        ...mapActions(['refreshPolling'])\n    },\n    created() {\n        let newDaySession = {\n            date: getNowDate(),\n            msg: [{\n                host: 'ai',\n                content: {\n                    text: '您好，源恒智能客服小穗来啦，很高兴为您服务！<br/>希望能给您的疑问提供有效的参考。',\n                    relativeFileList: null,\n                    relativeQuestionList: null,\n                    isSetResolve: false,\n                    time: getNowTime()\n                }\n            }]\n        }\n        if(this.isSetSessionStorage){\n            let allMsg = window.sessionStorage.getItem('allMsg');\n            let uuid = window.sessionStorage.getItem('uuid');\n            // let role = window.sessionStorage.getItem('role');\n            if (uuid) {\n                if(allMsg){\n                    this.GETDATAFROMLOCALSTORAGE(allMsg);\n                }\n                this.SETUUID(uuid);\n                // this.SETROLE(parseInt(role));\n                // this.refreshPolling()\n            }\n        }\n        if (this.allMsg.length == 0 || this.allMsg[this.allMsg.length - 1].date !== getNowDate()) {\n            this.ADDSESSIONITEM(newDaySession)\n        }\n\n        window.onresize = this.scrollResize\n\n    }\n    \n\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('keep-alive',{attrs:{\"include\":\"AppIndex,AppMobleIndex\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-196f53f6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-196f53f6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport store from './store'\nimport router from './router'\n\nimport './router/handleRoute.js';\n\nimport VModal from 'vue-js-modal'\n\nVue.use(VModal, { dialog: true })\n\nimport './assets/common.css'\n\nimport './directives/index'\nimport './filters/index'\n\nimport App from './App.vue'\n\nVue.config.productionTip = false;\n\n\n// 生成环境不打包\n// process.env.NODE_ENV === 'production' || require('./mock/index.js'); \n\n/* eslint-disable no-new */\nnew Vue({\n    el: '#app',\n    computed:{\n        theme(){\n            return 'theme-'+this.$store.getters.getTheme\n        }\n    },\n    router,\n    store,\n    components: { App },\n    template: '<App :class=\"theme\"/>',\n})\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","require('es6-promise').polyfill();\r\nimport axios from 'axios';\r\nimport store from '../store/index'\r\n\r\nexport function getTopTenQuestion() {  \r\n    return axios.get('/AIQA/v1/hot_question/');\r\n}\r\n\r\nexport function getAnswer(q,qid) {  \r\n    return axios.get('/AIQA/v1/search/?q='+ encodeURIComponent(q)+'&id='+qid);\r\n}\r\n\r\nexport function isUnresolve(q) {  \r\n    return axios.get('/AIQA/v1/question_unresolve/?question='+q.question+'&uuid_key='+q.uuid);\r\n}\r\n\r\nexport function isResolve(q) {  \r\n    return axios.get('/AIQA/v1/question_resolve/?question='+q.question+'&uuid_key='+q.uuid);\r\n}\r\n\r\nexport function getResultFromTuring(q) {\r\n    return axios({\r\n        method: 'post',\r\n        url:'http://www.tuling123.com/openapi/api',\r\n        params: {\r\n            'key': 'bfb9bad7b081450fb1fbfd06bfdb2619',\r\n            'info':q,\r\n            'userid':'253941'\r\n        }\r\n    })\r\n}\r\n\r\nexport function getSuggest(q) {  \r\n    return axios.get('/AIQA/v1/get_question/?question='+q);\r\n}\r\n\r\nexport function askQuestions(params) {\r\n    store.commit('SETISASKED',true)\r\n    return axios.post(\r\n        // '/AIQA/v1/ask_questions',\r\n        '/AIQA/v1/search',\r\n        {\r\n            uuid_key:params.uuid_key,\r\n            question:params.question,\r\n            knowledge_id:params.knowledge_id,\r\n            client_type:'PC'\r\n        }\r\n    );\r\n}\r\n\r\nexport function getPollingInfo(uuid) {\r\n    return axios.post('/AIQA/v1/find_answers',{\r\n            uuid_key:uuid,\r\n        });\r\n}\r\n\r\nexport function sendEmail(params){\r\n    return axios.post(\r\n        '/AIQA/v1/unsolved_email',\r\n        {\r\n            uuid_key:params.uuid_key,\r\n            question:params.question,\r\n            email:params.email,\r\n        }\r\n    );\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/api/index.js","import Vue from 'vue'\r\nimport 'jquery'\r\nimport 'jquery.nicescroll'\r\n\r\nexport function scrollToBottom () {\r\n    Vue.nextTick(function() {\r\n        $(\"#msgOutput\").getNiceScroll().resize();\r\n        $(\"#msgOutput\").getNiceScroll(0).doScrollTop($('#msgOutput')[0].scrollHeight, 1000);\r\n    })\r\n}\r\n\r\nexport function scrollResize() {\r\n    $(\"#msgOutput\").getNiceScroll().resize();\r\n}\r\n\r\nexport function scrollToHeight(height,isAnimate) {  \r\n    Vue.nextTick(function() {\r\n        if(isAnimate){\r\n            $(\"#msgOutput\").getNiceScroll().resize();\r\n            $(\"#msgOutput\").getNiceScroll(0).doScrollTop(height, 1000);\r\n        }else{\r\n            $(\"#msgOutput\").scrollTop(height);\r\n        }\r\n    })\r\n}\r\n\r\n\r\nexport function getNowTime() {  \r\n    let now = new Date();\r\n    let hour = now.getHours()<10 ? '0'+now.getHours() : now.getHours();\r\n    let minute = now.getMinutes()<10 ? '0'+now.getMinutes() : now.getMinutes();\r\n    let second = now.getSeconds()<10 ? '0'+now.getSeconds() : now.getSeconds();\r\n    return hour+':'+minute+':'+second\r\n}\r\n\r\nexport function getNowDate() {  \r\n    let now = new Date();\r\n    let year = now.getFullYear();\r\n    let month= now.getMonth()<10 ? '0'+ (now.getMonth()+1) : (now.getMonth()+1);\r\n    let day = now.getDate()<10 ? '0'+now.getDate() : now.getDate();\r\n    return year+'-'+month+'-'+day\r\n}\r\n\r\nexport function formatterElScrollBar(selector) {  \r\n    $(selector).niceScroll({\r\n        cursorcolor: \"rgb(22, 120, 163)\",\r\n        cursorwidth: \"5px\",\r\n        cursorborder: \"none\"\r\n    });\r\n}\r\n\r\nexport var mobile_bs = {\r\n    versions: function() {\r\n        var u = navigator.userAgent;\r\n        return {\r\n            trident: u.indexOf('Trident') > -1, //IE内核\r\n            presto: u.indexOf('Presto') > -1,  //opera内核\r\n            webKit: u.indexOf('AppleWebKit') > -1,  //苹果、谷歌内核\r\n            gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,  //火狐内核\r\n            mobile: !! u.match(/AppleWebKit.*Mobile.*/) || !! u.match(/AppleWebKit/) && u.indexOf('QIHU') && u.indexOf('QIHU') > -1 && u.indexOf('Chrome') < 0,  //是否为移动终端\r\n            ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),  //ios终端\r\n            android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1,  //android终端或者uc浏览器\r\n            iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1,   //是否为iPhone或者QQHD浏览器\r\n            iPad: u.indexOf('iPad') > -1,     //是否iPad\r\n            webApp: u.indexOf('Safari') == -1   //是否web应该程序，没有头部与底部\r\n        }\r\n    } ()\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js"],"sourceRoot":""}